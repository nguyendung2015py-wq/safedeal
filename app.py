import streamlit as st
import base64
from dataclasses import dataclass
from typing import List

st.set_page_config(
    page_title="SafeDeal ‚Äî —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ —Å–¥–µ–ª–∫–∏",
    layout="wide",
    initial_sidebar_state="collapsed",
)

def get_base64_image(image_path):
    try:
        with open(image_path, "rb") as img_file:
            return base64.b64encode(img_file.read()).decode()
    except Exception:
        return None

def inject_custom_styles() -> None:
    st.markdown(
        """
        <style>
        body {
            background-color: #ffffff;
            color: #2d3436;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Inter, sans-serif;
        }
        section[data-testid="stSidebar"], [data-testid="collapsedControl"] { display: none !important; }
        .main .block-container { padding-top: 1.5rem; max-width: 950px; }

        /* –ñ–ï–°–¢–ö–ê–Ø –¶–ï–ù–¢–†–û–í–ö–ê –í–ï–†–•–ù–ï–ì–û –ë–õ–û–ö–ê */
        .header-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 100%;
            margin-bottom: 2rem;
        }
        .logo-img {
            width: 140px; height: 140px; border-radius: 50%; object-fit: cover;
            box-shadow: 0 6px 15px rgba(0, 138, 94, 0.2); border: 4px solid #008a5e;
            padding: 3px; margin-bottom: 15px;
        }
        .hero-title { font-size: 2.2rem; font-weight: 900; color: #1e1e1e; margin: 0 0 5px 0; letter-spacing: 0.05em; }
        .hero-subtitle { font-size: 1.1rem; font-weight: 600; color: #008a5e; margin: 0 0 20px 0; }
        .custom-btn {
            background: linear-gradient(135deg, #008a5e 0%, #006f4b 100%);
            color: white !important; padding: 12px 35px; border-radius: 30px;
            font-weight: 600; font-size: 16px; text-decoration: none;
            box-shadow: 0 4px 15px rgba(0, 138, 94, 0.25); transition: 0.3s;
            display: inline-block;
        }
        .custom-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 138, 94, 0.35); }

        /* –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã */
        .stButton>button {
            background-color: #008a5e; color: #ffffff; border-radius: 8px; border: none;
            padding: 0.65rem 1.1rem; font-weight: 600; font-size: 0.9rem; width: 100%;
        }
        .stButton>button:hover { background-color: #006f49; }
        .input-card { background-color: #ffffff; border-radius: 0.9rem; padding: 1.1rem; box-shadow: 0 10px 24px rgba(15, 23, 42, 0.05); border: 1px solid #e5e7eb; margin-top: 0.4rem; }

        /* –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        .decision-banner { margin-top: 1.5rem; padding: 1.2rem; border-radius: 0.9rem; border: 1px solid; display: flex; align-items: center; gap: 1.5rem; }
        .decision-banner.danger { border-color: #dc2626; background: #fffcfc; }
        .decision-banner.safe { border-color: #059669; background: #f8fffc; }
        .decision-score { font-size: 2.8rem; font-weight: 800; line-height: 1; }
        .danger .decision-score, .danger .decision-text-main { color: #dc2626; }
        .safe .decision-score, .safe .decision-text-main { color: #059669; }
        .decision-text-main { font-size: 1.1rem; font-weight: 700; text-transform: uppercase; }
        .decision-text-sub { font-size: 0.9rem; color: #4b5563; margin-top: 5px; }

        .risk-table { width: 100%; border-collapse: collapse; margin-top: 1rem; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden; }
        .risk-table th { background-color: #f9fafb; font-weight: 700; padding: 12px; border-bottom: 2px solid #e5e7eb; text-align: left; }
        .risk-table td { padding: 12px; border-bottom: 1px solid #e5e7eb; vertical-align: top; font-size: 0.9rem; line-height: 1.5; }
        .risk-table th:nth-child(1) { width: 25%; }
        .risk-table th:nth-child(2) { width: 45%; }
        .risk-table th:nth-child(3) { width: 30%; }
        
        .footer-disclaimer { text-align: center; font-size: 0.75rem; color: #9ca3af; margin-top: 4rem; border-top: 1px solid #f3f4f6; padding-top: 1.5rem; line-height: 1.5; }
        </style>
        """,
        unsafe_allow_html=True,
    )

@dataclass
class RiskItem:
    what: str; law: str; fix: str; weight: float; category: str

@dataclass
class AnalysisResult:
    total_risk: int; items: List[RiskItem]

def _detect(text: str, keywords: List[str]) -> bool:
    return any(kw in text.lower() for kw in keywords)

def analyze_safedeal(text: str) -> AnalysisResult:
    items = []
    r_obj = 40.0 / 5.0
    r_sel = 60.0 / 5.0
    o_score = 0.0
    s_score = 0.0

    # –ì–õ–£–ë–û–ö–ê–Ø –Æ–†–ò–î–ò–ß–ï–°–ö–ê–Ø –ë–ê–ó–ê –î–õ–Ø –≠–ö–°–ü–ï–†–¢–ò–ó–´
    risks = [
        {"cat": "object", "what": "–ü—Ä–∏–≤–∞—Ç–∏–∑–∞—Ü–∏—è, –≤–æ–∑–º–æ–∂–Ω—ã–µ ¬´–æ—Ç–∫–∞–∑–Ω–∏–∫–∏¬ª", "kw": ["–ø—Ä–∏–≤–∞—Ç–∏–∑–∞", "—Å–æ—Ü–Ω–∞–π–º"], 
         "law": "<b>–ì–ö –†–§ —Å—Ç. 292, –ñ–ö –†–§ —Å—Ç. 31.</b> –§–ó –æ—Ç 29.12.2004 ‚Ññ 189-–§–ó (—Å—Ç. 19). –õ–∏—Ü–∞, –æ—Ç–∫–∞–∑–∞–≤—à–∏–µ—Å—è –æ—Ç —É—á–∞—Å—Ç–∏—è –≤ –ø—Ä–∏–≤–∞—Ç–∏–∑–∞—Ü–∏–∏, —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –±–µ—Å—Å—Ä–æ—á–Ω–æ–µ –ø—Ä–∞–≤–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–º–µ—â–µ–Ω–∏–µ–º. –°–¥–µ–ª–∫–∞ –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –Ω–µ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç —ç—Ç–æ –ø—Ä–∞–≤–æ. –†–∏—Å–∫ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã—Å–µ–ª–∏—Ç—å –∂–∏–ª—å—Ü–æ–≤ –¥–∞–∂–µ —á–µ—Ä–µ–∑ —Å—É–¥.", 
         "fix": "–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é (–∞—Ä—Ö–∏–≤–Ω—É—é) –≤—ã–ø–∏—Å–∫—É –∏–∑ –¥–æ–º–æ–≤–æ–π –∫–Ω–∏–≥–∏. –¢—Ä–µ–±–æ–≤–∞—Ç—å –Ω–æ—Ç–∞—Ä–∏–∞–ª—å–Ω–æ–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –æ —Å–Ω—è—Ç–∏–∏ —Å —Ä–µ–≥. —É—á–µ—Ç–∞ –¥–æ —Å–¥–µ–ª–∫–∏.", "w": r_obj},
        {"cat": "object", "what": "–ú–∞—Ç–∫–∞–ø–∏—Ç–∞–ª, –Ω–µ–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–æ–ª–∏ –¥–µ—Ç—è–º", "kw": ["–º–∞—Ç–∫–∞–ø–∏—Ç–∞–ª", "–º–∞—Ç–µ—Ä–∏–Ω—Å–∫"], 
         "law": "<b>–°–ö –†–§ —Å—Ç. 60, –ì–ö –†–§ —Å—Ç. 37.</b> –§–ó ‚Ññ 256-–§–ó (—á. 4 —Å—Ç. 10). –ñ–∏–ª–æ–µ –ø–æ–º–µ—â–µ–Ω–∏–µ, –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–Ω–æ–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—Ç–∫–∞–ø–∏—Ç–∞–ª–∞, –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è –≤ –æ–±—â—É—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏ –¥–µ—Ç–µ–π. –°–¥–µ–ª–∫–∞ –±–µ–∑ –≤—ã–¥–µ–ª–µ–Ω–∏—è –¥–æ–ª–µ–π —è–≤–ª—è–µ—Ç—Å—è –Ω–∏—á—Ç–æ–∂–Ω–æ–π (—Å—Ç. 168 –ì–ö –†–§). –†–∏—Å–∫ —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏ –ø–æ –∏—Å–∫—É –æ—Ä–≥–∞–Ω–æ–≤ –æ–ø–µ–∫–∏ –∏–ª–∏ –ø—Ä–æ–∫—É—Ä–æ—Ä–∞.", 
         "fix": "–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É –æ–± –æ—Å—Ç–∞—Ç–∫–µ —Å—Ä–µ–¥—Å—Ç–≤ –º–∞—Ç–∫–∞–ø–∏—Ç–∞–ª–∞ –∏–∑ –°–§–†. –ò–∑—É—á–∏—Ç—å –∫—Ä–µ–¥–∏—Ç–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä –∏ –¥–æ–≥–æ–≤–æ—Ä –æ—Å–Ω–æ–≤–∞–Ω–∏—è –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –ø–æ –≤—ã–¥–µ–ª–µ–Ω–∏—é –¥–æ–ª–µ–π.", "w": r_obj},
        {"cat": "object", "what": "–ù–∞—Å–ª–µ–¥—Å—Ç–≤–æ –∏ –Ω–µ—É—á—Ç—ë–Ω–Ω—ã–µ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏", "kw": ["–Ω–∞—Å–ª–µ–¥—Å—Ç–≤", "–∑–∞–≤–µ—â–∞–Ω"], 
         "law": "<b>–ì–ö –†–§ —Å—Ç. 1149</b> (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –¥–æ–ª—è: –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏–µ, –Ω–µ—Ç—Ä—É–¥–æ—Å–ø–æ—Å–æ–±–Ω—ã–µ). <b>–ì–ö –†–§ —Å—Ç. 1155</b> (–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–∞). –ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ü–ª–µ–Ω—É–º–∞ –í–° –†–§ –æ—Ç 29.05.2012 ‚Ññ 9. –†–∏—Å–∫: –ø–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ –≤–µ–¥–µ—Ç –∫ –∏—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é –¥–æ–ª–∏ –∏–∑ –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–≥–æ –≤–ª–∞–¥–µ–Ω–∏—è (—Å—Ç. 302 –ì–ö –†–§).", 
         "fix": "–û—Ç–∫–∞–∑ –æ—Ç —Å–¥–µ–ª–æ–∫ —Å–æ —Å–≤–µ–∂–∏–º –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–æ–º (–¥–æ 3 –ª–µ—Ç). –ü–æ–ª—É—á–∏—Ç—å –Ω–æ—Ç–∞—Ä–∏–∞–ª—å–Ω–æ–µ –∑–∞—è–≤–ª–µ–Ω–∏–µ –æ—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞ –æ –ª–∏—á–Ω–æ–º —Ä–∞—Å—á–µ—Ç–µ —Å –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞–º–∏.", "w": r_obj},
        {"cat": "object", "what": "–°–∞–º–æ–≤–æ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏", "kw": ["–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤", "—É–∑–∞–∫–æ–Ω–µ–Ω", "–Ω–µ—Å—É—â", "–º–æ–∫—Ä"], 
         "law": "<b>–ñ–ö –†–§ —Å—Ç. 29</b> (–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è —Å–∞–º–æ–≤–æ–ª—å–Ω–æ–π –ø–µ—Ä–µ—É—Å—Ç—Ä–æ–∏ÃÜ–∫–∏). <b>–ö–æ–ê–ü –†–§ —Å—Ç. 7.21</b>. –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å –≤–µ—Ä–Ω—É—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–æ–∂–∏—Ç—Å—è –Ω–∞ –Ω–æ–≤–æ–≥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞. –í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ –≤–æ–∑–º–æ–∂–Ω–∞ –ø—Ä–æ–¥–∞–∂–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã —Å –ø—É–±–ª–∏—á–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤ –ø–æ –∏—Å–∫—É –ñ–∏–ª–∏–Ω—Å–ø–µ–∫—Ü–∏–∏.", 
         "fix": "–°–≤–µ—Ä–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –ø–∞—Å–ø–æ—Ä—Ç–æ–º –ë–¢–ò. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ –º–æ–∫—Ä—ã—Ö —Ç–æ—á–µ–∫ –Ω–∞ –∂–∏–ª—ã–µ –∑–æ–Ω—ã.", "w": r_obj},
        {"cat": "object", "what": "–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ —á–∞—Å—Ç—ã–µ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∏", "kw": ["—á–∞—Å—Ç–∞—è —Å–º–µ–Ω–∞", "–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–≤–∞–ª–∞—Å—å", "–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤"], 
         "law": "<b>–ì–ö –†–§ —Å—Ç. 170</b> (–ú–Ω–∏–º–∞—è –∏ –ø—Ä–∏—Ç–≤–æ—Ä–Ω–∞—è —Å–¥–µ–ª–∫–∏). <b>–§–ó ‚Ññ 127-–§–ó —Å—Ç. 61.2</b>. –ß–∞—Å—Ç–∞—è —Å–º–µ–Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –∑–∞ –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫ ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–∑–Ω–∞–∫ –≤—ã–≤–æ–¥–∞ –∞–∫—Ç–∏–≤–∞ –∏–ª–∏ —Å–æ–∫—Ä—ã—Ç–∏—è –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞. –¶–µ–ø–æ—á–∫–∞ —Å–¥–µ–ª–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–∑–Ω–∞–Ω–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π —Å—É–¥–æ–º.", 
         "fix": "–ó–∞–∫–∞–∑–∞—Ç—å –≤—ã–ø–∏—Å–∫—É –ï–ì–†–ù –æ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø—Ä–∞–≤. –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø—Ä–∞–≤–æ–≤—É—é —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—É –∑–∞–∫–æ–Ω–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–∏ –≤ —Ü–µ–ø–æ—á–∫–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3-5 –ª–µ—Ç.", "w": r_obj},
        {"cat": "seller", "what": "–ü—Ä–∏–∑–Ω–∞–∫–∏ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞ –∏ –¥–æ–ª–≥–∏", "kw": ["–±–∞–Ω–∫—Ä–æ—Ç", "–ø—Ä–∏—Å—Ç–∞–≤", "–¥–æ–ª–≥", "–¥–µ—à–µ–≤–æ", "–Ω–∏–∂–µ —Ä—ã–Ω–∫–∞"], 
         "law": "<b>–§–ó ‚Ññ 127-–§–ó ¬´–û –Ω–µ—Å–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–µ)¬ª —Å—Ç. 61.2.</b> –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –¥–æ–ª–∂–Ω–∏–∫–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Å–ø–æ—Ä–µ–Ω—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —É–ø—Ä–∞–≤–ª—è—é—â–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 3 –ª–µ—Ç (–∞ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –¥–æ 10 –ª–µ—Ç). –û–±—ä–µ–∫—Ç –∏–∑—ã–º–∞–µ—Ç—Å—è –≤ –∫–æ–Ω–∫—É—Ä—Å–Ω—É—é –º–∞—Å—Å—É, –ø–æ–∫—É–ø–∞—Ç–µ–ª—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫—Ä–µ–¥–∏—Ç–æ—Ä–æ–º 3-–π –æ—á–µ—Ä–µ–¥–∏.", 
         "fix": "–ê—É–¥–∏—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞ –ø–æ –±–∞–∑–∞–º –§–°–°–ü, –ï–§–†–°–ë, –∫–∞—Ä—Ç–æ—Ç–µ–∫–µ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã—Ö –¥–µ–ª (–ö–ê–î) –∏ –ì–ê–° ¬´–ü—Ä–∞–≤–æ—Å—É–¥–∏–µ¬ª.", "w": r_sel},
        {"cat": "seller", "what": "–°–æ–º–Ω–µ–Ω–∏—è –≤ –¥–µ–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (–≤–æ–∑—Ä–∞—Å—Ç/—É—á–µ—Ç)", "kw": ["–ø–µ–Ω—Å–∏–æ–Ω–µ—Ä", "–ø–æ–∂–∏–ª", "–∏–Ω–≤–∞–ª–∏–¥", "–ø—Å–∏—Ö–∏–∞—Ç—Ä", "–Ω–∞—Ä–∫–æ–ª–æ–≥"], 
         "law": "<b>–ì–ö –†–§ —Å—Ç. 177.</b> –°–¥–µ–ª–∫–∞, —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–∞—è –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–æ–º, —Ö–æ—Ç—è –∏ –¥–µ–µ—Å–ø–æ—Å–æ–±–Ω—ã–º, –Ω–æ –Ω–∞—Ö–æ–¥–∏–≤—à–∏–º—Å—è –≤ –º–æ–º–µ–Ω—Ç –µ–µ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∫–æ–≥–¥–∞ –æ–Ω –Ω–µ –±—ã–ª —Å–ø–æ—Å–æ–±–µ–Ω –ø–æ–Ω–∏–º–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π, –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–∑–Ω–∞–Ω–∞ —Å—É–¥–æ–º –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π. –ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–æ–¥–∞–≤—Ü—É.", 
         "fix": "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ–∫ –∏–∑ –ü–ù–î –∏ –ù–î. –û—Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤—Ä–∞—á–æ–º-–ø—Å–∏—Ö–∏–∞—Ç—Ä–æ–º –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –¥–µ–Ω—å –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –î–ö–ü.", "w": r_sel},
        {"cat": "seller", "what": "–°–æ–≤–º–µ—Å—Ç–Ω–æ –Ω–∞–∂–∏—Ç–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ", "kw": ["–±—Ä–∞–∫", "–∂–µ–Ω–∞—Ç", "–∑–∞–º—É–∂–µ–º", "—Å—É–ø—Ä—É–≥", "—Ä–∞–∑–≤–æ–¥"], 
         "law": "<b>–°–ö –†–§ —Å—Ç. 35 —á. 3. –ì–ö –†–§ —Å—Ç. 253.</b> –î–ª—è —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–æ—Ç–∞—Ä–∏–∞–ª—å–Ω–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ —Å—É–ø—Ä—É–≥–∞. –ü—Ä–∏ –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å—É–ø—Ä—É–≥ –≤–ø—Ä–∞–≤–µ —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø—Ä–∏–∑–Ω–∞–Ω–∏—è —Å–¥–µ–ª–∫–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –≤ —Å—É–¥–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 1 –≥–æ–¥–∞ —Å –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ —É–∑–Ω–∞–ª –æ —Å–¥–µ–ª–∫–µ.", 
         "fix": "–ü–æ–ª—É—á–∏—Ç—å –Ω–æ—Ç–∞—Ä–∏–∞–ª—å–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ —Å—É–ø—Ä—É–≥–∞ (–≤ —Ç.—á. –±—ã–≤—à–µ–≥–æ, –µ—Å–ª–∏ –∏–º—É—â–µ—Å—Ç–≤–æ –Ω–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–æ) –∏–ª–∏ –ø—Ä–µ–¥—ä—è–≤–∏—Ç—å –±—Ä–∞—á–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä.", "w": r_sel},
        {"cat": "seller", "what": "–°–¥–µ–ª–∫–∞ –ø–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏", "kw": ["–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç", "–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ", "–ø–æ–≤–µ—Ä–µ–Ω–Ω"], 
         "law": "<b>–ì–ö –†–§ —Å—Ç. 188</b> (–ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏). –°–¥–µ–ª–∫–∞ –Ω–∏—á—Ç–æ–∂–Ω–∞, –µ—Å–ª–∏ –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –î–ö–ü –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å —É–º–µ—Ä, –ø—Ä–∏–∑–Ω–∞–Ω –Ω–µ–¥–µ–µ—Å–ø–æ—Å–æ–±–Ω—ã–º –∏–ª–∏ –æ—Ç–æ–∑–≤–∞–ª –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å. –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è –ø–æ—Å–ª–µ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—è –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–µ –≤–ª–µ–∫—É—Ç –ø—Ä–∞–≤–æ–≤—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π –¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞.", 
         "fix": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ –æ–Ω–ª–∞–π–Ω-—Ä–µ–µ—Å—Ç—Ä—É –§–ù–ü –ø–µ—Ä–µ–¥ —Å–¥–µ–ª–∫–æ–π. –ù–∞—Å—Ç–æ—è—Ç—å –Ω–∞ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–µ –∏–ª–∏ –ª–∏—á–Ω–æ–π –≤—Å—Ç—Ä–µ—á–µ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–º.", "w": r_sel},
        {"cat": "seller", "what": "–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Å–ø–æ—Ä—Ç–æ–º", "kw": ["–ø–∞—Å–ø–æ—Ä—Ç", "—É—Ç–µ—Ä—è"], 
         "law": "<b>–ì–ö –†–§ —Å—Ç. 179</b> (–ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–¥–µ–ª–∫–∏, —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–π –ø–æ–¥ –≤–ª–∏—è–Ω–∏–µ–º –æ–±–º–∞–Ω–∞). <b>–£–ö –†–§ —Å—Ç. 159</b> (–ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ). –°–¥–µ–ª–∫–∞ —Å –ª–∏—Ü–æ–º –ø–æ –ø–æ–¥–¥–µ–ª—å–Ω–æ–º—É –∏–ª–∏ —É–∫—Ä–∞–¥–µ–Ω–Ω–æ–º—É –ø–∞—Å–ø–æ—Ä—Ç—É –Ω–µ –ø–æ—Ä–æ–∂–¥–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø—Ä–∞–≤–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏. –û–±—ä–µ–∫—Ç –±—É–¥–µ—Ç –∏–∑—ä—è—Ç –ø–æ–ª–∏—Ü–∏–µ–π/—Å—É–¥–æ–º.", 
         "fix": "–í–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–∞—Å–ø–æ—Ä—Ç–∞ (–ø—Ä–æ—Å–≤–µ—Ç, –≤–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏). –°–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–ø–∏—Å–∫—É –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø–∞—Å–ø–æ—Ä—Ç–æ–≤ –ú–í–î.", "w": r_sel},
        {"cat": "trigger", "what": "–ó–∞–Ω–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã –≤ –î–ö–ü", "kw": ["–∑–∞–Ω–∏–∂–µ–Ω", "–≤ –∫–æ–Ω–≤–µ—Ä—Ç–µ", "–º–µ–Ω—å—à–µ", "–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è"], 
         "law": "<b>–ì–ö –†–§ —Å—Ç. 170</b> (–ü—Ä–∏—Ç–≤–æ—Ä–Ω–∞—è —Å–¥–µ–ª–∫–∞). <b>–ù–ö –†–§ —Å—Ç. 122.</b> –ü—Ä–∏ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–µ –ø—Ä–æ–¥–∞–≤—Ü–∞ —Å—É–¥ –æ–±—è–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—é –ª–∏—à—å –≤ —Ä–∞–∑–º–µ—Ä–µ —Å—É–º–º—ã, —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤ –î–ö–ü. –î–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–µ–Ω–µ–≥ ¬´–≤ –∫–æ–Ω–≤–µ—Ä—Ç–µ¬ª (–ø–æ —Ä–∞—Å–ø–∏—Å–∫–∞–º) –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.", 
         "fix": "–°—Ç—Ä–æ–≥–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ –î–ö–ü. –ü—Ä–æ–≤–æ–¥–∏—Ç—å —Ä–∞—Å—á–µ—Ç—ã –±–µ–∑–Ω–∞–ª–∏—á–Ω—ã–º –ø—É—Ç–µ–º (–∞–∫–∫—Ä–µ–¥–∏—Ç–∏–≤ –∏–ª–∏ —ç—Å–∫—Ä–æ—É-—Å—á–µ—Ç).", "w": 15.0},
        {"cat": "trigger", "what": "–û—Ç–∫–∞–∑ –æ—Ç –∏–ø–æ—Ç–µ–∫–∏", "kw": ["–±–µ–∑ –∏–ø–æ—Ç–µ–∫–∏", "—Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–Ω—ã–µ"], 
         "law": "–û—Ç–∫–∞–∑ –æ—Ç –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —á–∞—Å—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö –ø—Ä–∞–≤–æ–≤—ã—Ö –ø–æ—Ä–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø—Ä–æ–π–¥—É—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ª—É–∂–±–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —é—Ä–∏—Å—Ç–∞–º–∏ –±–∞–Ω–∫–∞ (–§–ó ‚Ññ102-–§–ó ¬´–û–± –∏–ø–æ—Ç–µ–∫–µ¬ª). –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Å–∫—Ä—ã—Ç–æ–≥–æ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞.", 
         "fix": "–ü—Ä–æ–≤–µ—Å—Ç–∏ –≥–ª—É–±–æ–∫–∏–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∞—É–¥–∏—Ç –æ–±—ä–µ–∫—Ç–∞ —Å –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ–º —ç–∫—Å–ø–µ—Ä—Ç–∞-—Ä–∏–µ–ª—Ç–æ—Ä–∞ –∏–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–≥–æ —é—Ä–∏—Å—Ç–∞.", "w": 15.0},
        {"cat": "trigger", "what": "–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—Ç–∫–∞ –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤", "kw": ["–∑–∞–¥–∞—Ç–æ–∫ –¥–æ", "–∞–≤–∞–Ω—Å –¥–æ", "–ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"], 
         "law": "<b>–ì–ö –†–§ —Å—Ç. 380, —Å—Ç. 381.</b> –ï—Å–ª–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∂–µ—Ç—Å—è –æ—Ç —Å–¥–µ–ª–∫–∏ –∏–∑-–∑–∞ –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ–∑–∂–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Å–∫–æ–≤, –ø—Ä–æ–¥–∞–≤–µ—Ü –∏–º–µ–µ—Ç –∑–∞–∫–æ–Ω–Ω–æ–µ –ø—Ä–∞–≤–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞–¥–∞—Ç–æ–∫ —Å–µ–±–µ, —Å—Å—ã–ª–∞—è—Å—å –Ω–∞ –æ—Ç–∫–∞–∑ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –ø–æ ¬´–Ω–µ–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º¬ª –ø—Ä–∏—á–∏–Ω–∞–º.", 
         "fix": "–í–Ω–æ—Å–∏—Ç—å –æ–±–µ—Å–ø–µ—á–∏—Ç–µ–ª—å–Ω—ã–π –ø–ª–∞—Ç–µ–∂ (–∞–≤–∞–Ω—Å) —Å —É—Å–ª–æ–≤–∏–µ–º –ø–æ–ª–Ω–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π, —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–∞–≤–æ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.", "w": 15.0},
    ]

    for cfg in risks:
        if _detect(text, cfg["kw"]):
            if cfg["cat"] == "object": o_score += cfg["w"]
            elif cfg["cat"] == "seller": s_score += cfg["w"]
            items.append(RiskItem(cfg["what"], cfg["law"], cfg["fix"], cfg["w"], cfg["cat"]))

    b_tot = min(o_score, 40.0) + min(s_score, 60.0)
    if any(i.category == "trigger" for i in items): b_tot = max(b_tot, 90.0)
    if _detect(text, ["–Ω–∞—Å–ª–µ–¥—Å—Ç–≤", "–∑–∞–≤–µ—â–∞–Ω", "–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç"]): b_tot = max(b_tot, 80.0)
    
    if not items:
        b_tot = 60.0
        items.append(RiskItem("–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∞–∫—Ç—É—Ä–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞", "<b>–ì–ö –†–§ —Å—Ç. 10</b> (–ü—Ä–µ–¥–µ–ª—ã –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏—Ö –ø—Ä–∞–≤), <b>—Å—Ç. 421</b> (–°–≤–æ–±–æ–¥–∞ –¥–æ–≥–æ–≤–æ—Ä–∞). –°–æ–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–æ–º —é—Ä–∏–¥–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–±–µ –∏–ª–∏ –æ–±—ä–µ–∫—Ç–µ –ª–∏—à–∞–µ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å —Ä–∏—Å–∫–∏ —É—Ç—Ä–∞—Ç—ã –ø—Ä–∞–≤–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.", "–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –≤—ã–ø–∏—Å–∫—É –ï–ì–†–ù, –¥–æ–∫—É–º–µ–Ω—Ç—ã-–æ—Å–Ω–æ–≤–∞–Ω–∏—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –ø—Ä–∞–≤–∞ –∏ —Å–ø—Ä–∞–≤–∫–∏ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–µ–π.", 60.0, "object"))

    return AnalysisResult(max(0, min(int(round(b_tot)), 100)), items)

def main():
    inject_custom_styles()

    # –ò–∑–≤–ª–µ–∫–∞–µ–º –ª–æ–≥–æ—Ç–∏–ø –≤ Base64 –¥–ª—è 100% —Ü–µ–Ω—Ç—Ä–æ–≤–∫–∏ —á–µ—Ä–µ–∑ HTML
    logo_b64 = get_base64_image("logo.png")
    if logo_b64:
        logo_html = f'<img src="data:image/png;base64,{logo_b64}" class="logo-img">'
    else:
        logo_html = "<div style='font-size:50px; margin-bottom:15px;'>üè¢</div>"

    # –§–æ—Ä–º–∏—Ä—É–µ–º –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ —Ü–µ–ª–∏–∫–æ–º –≤ HTML
    st.markdown(f"""
        <div class="header-wrapper">
            {logo_html}
            <div class="hero-title">–ê–†–¢–ï–ú –ù–û–°–û–í | –†–ò–ï–õ–¢–û–†</div>
            <div class="hero-subtitle">–ê–≤—Ç–æ—Ä—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å –∞—É–¥–∏—Ç–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</div>
            <a href="https://t.me/nosov_s_blog" class="custom-btn" target="_blank">üëâ –ü–ï–†–ï–ô–¢–ò –í –ë–õ–û–ì ¬´–ü–£–¢–¨ –ë–ï–ó –§–ê–õ–¨–®–ò¬ª</a>
        </div>
    """, unsafe_allow_html=True)

    st.markdown('<div class="input-card">', unsafe_allow_html=True)
    text = st.text_area("–¢–µ–∫—Å—Ç –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã", height=160, placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏. –£–∫–∞–∂–∏—Ç–µ —Å—Ç–∞—Ç—É—Å—ã: –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–æ, –∏–ø–æ—Ç–µ–∫–∞, –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –º–∞—Ç–∫–∞–ø–∏—Ç–∞–ª –∏ —Ç.–¥.")
    
    if st.button("–ó–ê–ü–£–°–¢–ò–¢–¨ –≠–ö–°–ü–ï–†–¢–ò–ó–£"):
        if not text.strip(): 
            st.warning("–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.")
        else:
            res = analyze_safedeal(text)
            b_cls = "danger" if res.total_risk >= 50 else "safe"
            z_lbl = "–ö–†–ê–°–ù–ê–Ø –ó–û–ù–ê" if b_cls == "danger" else "–ö–û–ù–¢–†–û–õ–ò–†–£–ï–ú–´–ô –†–ò–°–ö"
            
            st.markdown(f"""
            <div class="decision-banner {b_cls}">
                <div style="text-align: center; min-width: 120px;">
                    <div class="decision-score">{res.total_risk}%</div>
                    <div style="font-size: 0.8rem; font-weight: bold; color: #6b7280; margin-top: 5px;">–ò–¢–û–ì–û–í–´–ô –í–ï–†–î–ò–ö–¢</div>
                </div>
                <div>
                    <div class="decision-text-main">{z_lbl}</div>
                    <div class="decision-text-sub">–í—ã—Å–æ–∫–∏–π —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫. –ë–µ–∑ –æ—á–Ω–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã —é—Ä–∏—Å—Ç–∞ –≤ —Å–¥–µ–ª–∫—É –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–µ–ª—å–∑—è.</div>
                </div>
            </div>
            """, unsafe_allow_html=True)

            table_html = "<table class='risk-table'><thead><tr><th>–ß–¢–û –ù–ê–®–õ–ò</th><th>–ó–ê–ö–û–ù (–Æ–†–ò–î–ò–ß–ï–°–ö–ê–Ø –ë–ê–ó–ê)</th><th>–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø –≠–ö–°–ü–ï–†–¢–ê</th></tr></thead><tbody>"
            for i in res.items:
                table_html += f"<tr><td><b>{i.what}</b></td><td>{i.law}</td><td>{i.fix}</td></tr>"
            table_html += "</tbody></table>"
            st.markdown(table_html, unsafe_allow_html=True)
            
    st.markdown('</div>', unsafe_allow_html=True)

    st.markdown("""
        <div class="footer-disclaimer">
            ‚ö†Ô∏è <b>–í–ù–ò–ú–ê–ù–ò–ï:</b> –î–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑–æ–≤—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –Ω–æ—Å–∏—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.<br>
            –°–µ—Ä–≤–∏—Å –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–º–µ–Ω–æ–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–æ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–¥–µ–ª–∫–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É.
        </div>
    """, unsafe_allow_html=True)

if __name__ == "__main__":
    main()
